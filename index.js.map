{"version":3,"file":"index.js","sources":["../src/init.js","../src/main.js"],"sourcesContent":["window.global ||= window;\n","import './init';\nimport './css/styles.css';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '48258923-bff14545616bbf92759f2c80c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('#searchForm');\nconst galleryImages = document.querySelector('#gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('#load-more');\nconst loadMoreLoader = document.querySelector('.load-more-loader');\n\nlet query = '';\nlet currentPage = 1;\nconst perPage = 40;\n\nloader.style.display = 'none';\nloadMoreButton.style.display = 'none';\nloadMoreLoader.style.display = 'none';\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: perPage,\n      },\n    });\n\n    const images = response.data.hits;\n    const totalHits = response.data.totalHits;\n\n    if (images.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    if (currentPage * perPage >= totalHits) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      loadMoreButton.style.display = 'none';\n      return;\n    }\n\n    const markup = images\n      .map(\n        ({\n          largeImageURL,\n          webformatURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n          <div class=\"image-card\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\" data-lightbox=\"gallery\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n            </a>\n            <div class=\"info\">\n              <p><span>Likes:</span> ${likes}</p>\n              <p><span>Views:</span> ${views}</p>\n              <p><span>Comments:</span> ${comments}</p>\n              <p><span>Downloads:</span> ${downloads}</p>\n            </div>\n          </div>\n        `\n      )\n      .join('');\n\n    galleryImages.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    if (currentPage * perPage < totalHits) {\n      loadMoreButton.style.display = 'block';\n    }\n\n    smoothScroll();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n    loadMoreLoader.style.display = 'none';\n  }\n}\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = document.querySelector('#form-input').value.trim();\n  if (!query) {\n    iziToast.error({\n      message: 'Please enter a search term!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  galleryImages.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'inline-block';\n\n  await fetchImages();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  loadMoreLoader.style.display = 'inline-block';\n  currentPage += 1;\n  await fetchImages();\n});\n\nfunction smoothScroll() {\n  const cardHeight = document\n    .querySelector('.gallery-link')\n    .getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","searchForm","galleryImages","loader","loadMoreButton","loadMoreLoader","query","currentPage","perPage","fetchImages","response","axios","images","totalHits","iziToast","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","smoothScroll","error","event","cardHeight"],"mappings":"wyBAAA,OAAO,SAAP,OAAO,OAAW,QCQlB,MAAMA,EAAU,qCACVC,EAAW,2BAEXC,EAAa,SAAS,cAAc,aAAa,EACjDC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAiB,SAAS,cAAc,mBAAmB,EAEjE,IAAIC,EAAQ,GACRC,EAAc,EAClB,MAAMC,EAAU,GAEhBL,EAAO,MAAM,QAAU,OACvBC,EAAe,MAAM,QAAU,OAC/BC,EAAe,MAAM,QAAU,OAE/B,eAAeI,GAAc,CAC3B,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIX,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGO,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,EAEKI,EAASF,EAAS,KAAK,KACvBG,EAAYH,EAAS,KAAK,UAEhC,GAAIE,EAAO,SAAW,EAAG,CACvBE,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CAED,GAAIP,EAAcC,GAAWK,EAAW,CACtCC,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EACDV,EAAe,MAAM,QAAU,OAC/B,MACD,CAED,MAAMW,EAASH,EACZ,IACC,CAAC,CACC,cAAAI,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc;AAAA;AAAA,uBAESN,CAAa;AAAA,0BACVC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,uCAGbC,CAAK;AAAA,uCACLC,CAAK;AAAA,0CACFC,CAAQ;AAAA,2CACPC,CAAS;AAAA;AAAA;AAAA,SAI7C,EACA,KAAK,EAAE,EAEVpB,EAAc,mBAAmB,YAAaa,CAAM,EAEnC,IAAIQ,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GACpB,CAAK,EACQ,QAAO,EAEZhB,EAAcC,EAAUK,IAC1BT,EAAe,MAAM,QAAU,SAGjCoB,GACD,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRtB,EAAO,MAAM,QAAU,OACvBE,EAAe,MAAM,QAAU,MAChC,CACH,CAEAJ,EAAW,iBAAiB,SAAU,MAAMyB,GAAS,CAInD,GAHAA,EAAM,eAAc,EAEpBpB,EAAQ,SAAS,cAAc,aAAa,EAAE,MAAM,OAChD,CAACA,EAAO,CACVQ,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDP,EAAc,EACdL,EAAc,UAAY,GAC1BE,EAAe,MAAM,QAAU,OAC/BD,EAAO,MAAM,QAAU,eAEvB,MAAMM,EAAW,CACnB,CAAC,EAEDL,EAAe,iBAAiB,QAAS,SAAY,CACnDC,EAAe,MAAM,QAAU,eAC/BE,GAAe,EACf,MAAME,EAAW,CACnB,CAAC,EAED,SAASe,GAAe,CACtB,MAAMG,EAAa,SAChB,cAAc,eAAe,EAC7B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}